<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cypress MQTT library: Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="cypress_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cypress MQTT library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Cypress MQTT library provides an easy-to-use APIs for Cypress devices to connect with cloud MQTT brokers and perform MQTT publish and subscribe operations.</p>
<h1><a class="anchor" id="section1"></a>
Library Components</h1>
<p>This MQTT library consists of two components: 1) AWS IoT Device SDK library 2) Platform porting layer</p>
<p>AWS IoT Device SDK library is an open source library and it uses the platform porting layer functions to perform MQTT operations. Hence, the application that uses this library should invoke the AWS IoT Device SDK library APIs and the platform porting layer APIs to perform MQTT publish/subscribe operations.</p>
<p><b>Library link:</b> <a href="https://github.com/aws/aws-iot-device-sdk-embedded-C/tree/v4_beta">https://github.com/aws/aws-iot-device-sdk-embedded-C/tree/v4_beta</a></p>
<h2><a class="anchor" id="section1_1"></a>
AWS IoT Device SDK C - v4.0.0</h2>
<p>This is an open source MQTT library developed and maintained by Amazon. This library implements the core MQTT protocol logic.</p>
<ul>
<li>"AWS IoT Device SDK C v4.0.0" library provides following features:<ul>
<li>MQTT 3.1.1 client</li>
<li>Asynchronous API for MQTT operations.</li>
<li>Multithreaded API by default.</li>
<li>Complete separation of MQTT and network stack, allowing MQTT to run on top of any network stack.</li>
<li>Configurable memory allocation (static-only or dynamic). Memory allocation functions may also be set by the user.</li>
<li>MQTT persistent session support.</li>
<li>Supports Quality of Service (QoS) levels 0 and 1</li>
<li>Supports MQTT connection over both secured and non secured TCP connections.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="section1_2"></a>
Platform Porting Layer</h2>
<p>This portable layer provides the APIs that are required for 'AWS IoT Device SDK library' to perform OS and Network related operations on the Cypress platform. This layer contains APIs that are used for creating thread, mutex, timers, etc. And it also contains APIs to establish secure/non-secure socket connections with MQTT broker to send and receive MQTT messages.</p>
<h1><a class="anchor" id="section_platforms"></a>
Supported Platforms</h1>
<p>This library and its features are supported on following Cypress platforms:</p><ul>
<li><a href="https://www.cypress.com/documentation/development-kitsboards/psoc-6-wi-fi-bt-prototyping-kit-cy8cproto-062-4343w">PSoC6 WiFi-BT Prototyping Kit (CY8CPROTO-062-4343W)</a></li>
<li><a href="https://www.cypress.com/documentation/development-kitsboards/psoc-62s2-wi-fi-bt-pioneer-kit-cy8ckit-062s2-43012">PSoC 62S2 Wi-Fi BT Pioneer Kit (CY8CKIT-062S2-43012)</a></li>
</ul>
<h1><a class="anchor" id="section_dependencies"></a>
Dependent libraries</h1>
<p>This MQTT client library depends on the following libraries. Both these libraries are included by default.</p><ul>
<li><a href="https://github.com/cypresssemiconductorco/wifi-mw-core">Wi-Fi Middleware Core</a></li>
<li><a href="https://github.com/aws/aws-iot-device-sdk-embedded-C/tree/v4_beta/libraries/standard/mqtt">AWS IoT Device SDK MQTT library</a></li>
</ul>
<h1><a class="anchor" id="section_quick_start"></a>
Quick start</h1>
<ul>
<li>A "reasonable amount of time" to wait for keep-alive responses from the MQTT broker is configured using IOT_MQTT_RESPONSE_WAIT_MS in <a href="./cyport/include/iot_config.h">iot_config.h</a>. This value may be adjusted to suit the use case and network environment.</li>
<li>The reference <a href="./cyport/include/iot_config.h">iot_config.h</a> that is bundled with this library provides the configurations required for <a href="https://github.com/aws/aws-iot-device-sdk-embedded-C/tree/v4_beta/libraries/standard/mqtt">AWS IoT Device SDK</a> library. The application must copy this file to the root directory where the application Makefile is present, and suitably adjust the default settings.</li>
<li>This MQTT client library does not support secure connections to the public test.mosquitto.org broker by default, as the server uses SHA1 hashing algorithm. As cautioned by mbedTLS, SHA-1 is considered a weak message digest and is therefore not enabled by default by mbedTLS. The use of SHA-1 for certificate signing constitutes a security risk. It is recommended to avoid dependencies on it, and consider stronger message digests instead. However, if it is desired to connect securely to test.mosquitto.org, follow these steps to enable support:<ol type="1">
<li>Define the below macro in your application: <div class="fragment"><div class="line">CY_MQTT_ENABLE_SECURE_TEST_MOSQUITTO_SUPPORT  </div></div><!-- fragment --></li>
<li>Enable SHA1 support in mbedTLS by defining the below macro in wifi-mw-core/configs/mbedtls_user_config.h: <div class="fragment"><div class="line"><span class="preprocessor">#define MBEDTLS_TLS_DEFAULT_ALLOW_SHA1_IN_CERTIFICATES  </span></div></div><!-- fragment --></li>
</ol>
</li>
<li>A set of pre-defined configuration files have been bundled with wifi-mw-core library for FreeRTOS, LwIP and MbedTLS. The developer is expected to review the configuration and make adjustments. Refer to the Quick start section in <a href="https://github.com/cypresssemiconductorco/wifi-mw-core/blob/master/README.md">README.md</a> for more details</li>
<li>A set of COMPONENTS have to be defined in the code example project's Makefile for MQTT library. Refer to the Quick start section in <a href="https://github.com/cypresssemiconductorco/wifi-mw-core/blob/master/README.md">README.md</a> for more details</li>
<li>Configure the following macros defined in cyport/include/iot_config.h file to enable/disable debug logs in this library: <div class="fragment"><div class="line"><span class="preprocessor">#define IOT_LOG_LEVEL_GLOBAL                        IOT_LOG_ERROR</span></div><div class="line"><span class="preprocessor">#define IOT_LOG_LEVEL_DEMO                          IOT_LOG_ERROR</span></div><div class="line"><span class="preprocessor">#define IOT_LOG_LEVEL_PLATFORM                      IOT_LOG_ERROR</span></div><div class="line"><span class="preprocessor">#define IOT_LOG_LEVEL_NETWORK                       IOT_LOG_ERROR</span></div><div class="line"><span class="preprocessor">#define IOT_LOG_LEVEL_TASKPOOL                      IOT_LOG_ERROR</span></div><div class="line"><span class="preprocessor">#define IOT_LOG_LEVEL_MQTT                          IOT_LOG_ERROR</span></div><div class="line"><span class="preprocessor">#define AWS_IOT_LOG_LEVEL_SHADOW                    IOT_LOG_ERROR</span></div><div class="line"><span class="preprocessor">#define AWS_IOT_LOG_LEVEL_DEFENDER                  IOT_LOG_ERROR</span></div><div class="line"><span class="preprocessor">#define AWS_IOT_LOG_LEVEL_JOBS                      IOT_LOG_ERROR</span></div></div><!-- fragment --> </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>Cypress MQTT library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
</body>
</html>
